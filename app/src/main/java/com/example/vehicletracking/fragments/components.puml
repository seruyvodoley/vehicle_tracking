@startuml

skinparam componentStyle rectangle
skinparam defaultTextAlignment center

' ==== Цветовая схема ====
' #CDEAFF – UI слой (Fragments)
' #DFFFD6 – Tracking Core (логика трекинга)
' #F9D6D5 – Simulation (генерация координат)
' #EEE8FF – Abstractions (интерфейсы и контракты)

' ==== UI Layer ====
package "UI Layer\n[Контроль потока, ограничение видимости]" <<Rectangle>> #CDEAFF {
  [MapFragment]
}

' ==== Tracking Core ====
package "Tracking Core\n[SRP, DIP, OCP, CCP, миним. связность, макс. связность]" <<Rectangle>> #DFFFD6 {
  [VehicleTracker]
  [MapTrackingViewModel]
}

' ==== Simulation Layer ====
package "Simulation\n[SRP, ограничение видимости]" <<Rectangle>> #F9D6D5 {
  [VehicleLocationSimulator]
}

' ==== Abstractions Layer ====
package "Abstractions\n[DIP, устойчивые зависимости]" <<Rectangle>> #EEE8FF {
  [LocationProvider]
  [LocationCallback]
}

' ==== Directed Dependencies ====
[MapFragment] --> [MapTrackingViewModel] : uses
[MapTrackingViewModel] --> [VehicleTracker] : controls
[VehicleTracker] --> [LocationProvider] : depends on abstraction
[VehicleLocationSimulator] --> [LocationCallback] : callback

' ==== Interface Implementation ====
[VehicleLocationSimulator] ..|> [LocationProvider]
[VehicleTracker] ..|> [LocationCallback]

@enduml
